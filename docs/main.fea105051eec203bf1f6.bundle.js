webpackJsonp([1],{"+h1B":function(n,t,l){"use strict";var e=l("/oeL"),u=l("aR8+"),i=l("wQAS"),s=l("f4wg"),r=l("q4dy"),o=l("qbdv"),a=l("fc+i"),c=l("CPp0"),d=l("BkNc"),p=l("OMQu"),f=l("diW6");l.d(t,"a",function(){return h});var h=e.b(u.a,[i.a],function(n){return e.c([e.d(512,e.e,e.f,[[8,[s.a,r.a]],[3,e.e],e.g]),e.d(5120,e.h,e.i,[[3,e.h]]),e.d(4608,o.a,o.b,[e.h]),e.d(5120,e.j,e.k,[]),e.d(5120,e.l,e.m,[]),e.d(5120,e.n,e.o,[]),e.d(4608,a.b,a.c,[o.c]),e.d(6144,e.p,null,[a.b]),e.d(4608,a.d,a.e,[]),e.d(5120,a.f,function(n,t,l,e){return[new a.g(n),new a.h(t),new a.i(l,e)]},[o.c,o.c,o.c,a.d]),e.d(4608,a.j,a.j,[a.f,e.q]),e.d(135680,a.k,a.k,[o.c]),e.d(4608,a.l,a.l,[a.j,a.k]),e.d(6144,e.r,null,[a.l]),e.d(6144,a.m,null,[a.k]),e.d(4608,e.s,e.s,[e.q]),e.d(4608,a.n,a.n,[o.c]),e.d(4608,a.o,a.o,[o.c]),e.d(4608,c.a,c.a,[]),e.d(4608,c.b,c.c,[]),e.d(5120,c.d,c.e,[]),e.d(4608,c.f,c.f,[c.a,c.b,c.d]),e.d(4608,c.g,c.h,[]),e.d(5120,c.i,c.j,[c.f,c.g]),e.d(5120,d.a,d.b,[d.c]),e.d(4608,d.d,d.d,[]),e.d(6144,d.e,null,[d.d]),e.d(135680,d.f,d.f,[d.c,e.t,e.u,e.v,d.e]),e.d(4608,d.g,d.g,[]),e.d(5120,d.h,d.i,[d.j]),e.d(5120,e.w,function(n){return[n]},[d.h]),e.d(4608,p.a,p.a,[c.i]),e.d(512,o.d,o.d,[]),e.d(1024,e.x,a.p,[]),e.d(1024,e.y,function(){return[d.k()]},[]),e.d(512,d.j,d.j,[e.v]),e.d(1024,e.z,function(n,t,l){return[a.q(n,t),d.l(l)]},[[2,a.r],[2,e.y],d.j]),e.d(512,e.A,e.A,[[2,e.z]]),e.d(131584,e.B,e.B,[e.q,e.C,e.v,e.x,e.e,e.A]),e.d(2048,e.D,null,[e.B]),e.d(512,e.E,e.E,[e.D]),e.d(512,a.s,a.s,[[3,a.s]]),e.d(512,c.k,c.k,[]),e.d(1024,d.m,d.n,[[3,d.c]]),e.d(512,d.o,d.p,[]),e.d(512,d.q,d.q,[]),e.d(256,d.r,{},[]),e.d(1024,o.e,d.s,[o.f,[2,o.g],d.r]),e.d(512,o.h,o.h,[o.e]),e.d(512,e.u,e.u,[]),e.d(512,e.t,e.F,[e.u,[2,e.G]]),e.d(1024,d.t,function(){return[[{path:"",redirectTo:"/main",pathMatch:"full"},{path:"main",component:f.a}]]},[]),e.d(1024,d.c,d.u,[e.D,d.o,d.q,o.h,e.v,e.t,e.u,d.t,d.r,[2,d.v],[2,d.w]]),e.d(512,d.x,d.x,[[2,d.m],[2,d.c]]),e.d(512,u.a,u.a,[])])})},1:function(n,t,l){n.exports=l("cDNt")},"3u38":function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){this.anger=0,this.contempt=0,this.disgust=0,this.fear=0,this.happiness=0,this.neutral=0,this.sadness=0,this.surprise=0}return n}()},B4HZ:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=["[_nghost-%COMP%]{text-align:center;padding:20px;float:left;color:#6495ed}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{padding:0;margin-bottom:10px}[_nghost-%COMP%]   .video-content[_ngcontent-%COMP%]{border:1px dotted grey;border-radius:4px;padding:5px;margin-bottom:10px;max-width:600px}[_nghost-%COMP%]   .analysis-results[_ngcontent-%COMP%], [_nghost-%COMP%]   .analysis-status[_ngcontent-%COMP%]{float:left;width:100%;text-align:left;padding:15px}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:4.165%}"]},OMQu:function(n,t,l){"use strict";var e=l("CPp0"),u=l("bKpL"),i=(l.n(u),l("xpf9")),s=(l.n(i),l("S7im")),r=(l.n(s),l("5v8a")),o=(l.n(r),l("d3MV")),a=l("3u38");l.d(t,"a",function(){return c});var c=function(){function n(n){this._http=n,this._EMOTION_VIDEO_API="https://westus.api.cognitive.microsoft.com/emotion/v1.0/recognizeinvideo?outputStyle=aggregate",this._requestOptions=new e.g,this._requestOptions.headers=new e.l,this._requestOptions.headers.append("Ocp-Apim-Subscription-Key","e9428e6688094bb0902a6f135f03e31e")}return n.prototype.postVideoForAnalysis=function(n){return this._requestOptions.headers.append("Content-Type","application/octet-stream"),this._http.post(this._EMOTION_VIDEO_API,n,this._requestOptions).map(this._extractOperationLocation.bind(this)).catch(this._handleError.bind(this))},n.prototype._extractOperationLocation=function(n){return n.headers.get("operation-location")},n.prototype.getVideoAnalysis=function(n){return this._requestOptions.headers.delete("Content-Type"),this._http.get(n,this._requestOptions).map(this._extractVideoAnalysis.bind(this))},n.prototype._extractVideoAnalysis=function(n){var t=n.json(),l=new o.a;switch(t.status){case"Succeeded":100===t.progress&&(l.completed=!0,l.data=this._getVideoAnalysis(t.processingResult));break;case"Running":l.completed=!1}return l},n.prototype._getVideoAnalysis=function(n){var t=JSON.parse(n),l=new a.a;if(t.fragments)for(var e=0,u=t.fragments;e<u.length;e++){var i=u[e];this._addExpressionScoreFromFragmentEvent(l,i.events||[])}return this._getExpressionAsPercentage(l)},n.prototype._addExpressionScoreFromFragmentEvent=function(n,t){for(var l=0,e=t;l<e.length;l++){var u=e[l];if(u instanceof Array)for(var i=0,s=u;i<s.length;i++){var r=s[i];this._addWindowMeanScores(n,r.windowMeanScores)}}},n.prototype._getExpressionAsPercentage=function(n){var t=n.anger+n.contempt+n.disgust+n.fear+n.happiness+n.neutral+n.sadness+n.surprise;return n.anger=Math.round(n.anger/t*100),n.contempt=Math.round(n.contempt/t*100),n.disgust=Math.round(n.disgust/t*100),n.fear=Math.round(n.fear/t*100),n.happiness=Math.round(n.happiness/t*100),n.neutral=Math.round(n.neutral/t*100),n.sadness=Math.round(n.sadness/t*100),n.surprise=Math.round(n.surprise/t*100),n},n.prototype._addWindowMeanScores=function(n,t){n.anger=n.anger+t.anger,n.contempt=n.contempt+t.contempt,n.disgust=n.disgust+t.disgust,n.fear=n.fear+t.fear,n.happiness=n.happiness+t.happiness,n.neutral=n.neutral+t.neutral,n.sadness=n.sadness+t.sadness,n.surprise=n.surprise+t.surprise},n.prototype._handleError=function(n){var t;if(n instanceof e.m){var l=n.json()||"",i=l.error||JSON.stringify(l);t=n.status+" - "+(n.statusText||"")+" "+i}else t=n.message?n.message:n.toString();return console.error(t),u.Observable.throw("Unexpected service failure. Please try again later.")},n.ctorParameters=function(){return[{type:e.i}]},n}()},"aR8+":function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){}return n}()},cDNt:function(n,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=l("/oeL"),u=l("p5Ee"),i=l("+h1B"),s=l("fc+i");u.a.production&&l.i(e.a)(),l.i(s.a)().bootstrapModuleFactory(i.a)},d3MV:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){}return n}()},diW6:function(n,t,l){"use strict";var e=l("/oeL"),u=l("+SkV"),i=(l.n(u),l("5v8a")),s=(l.n(i),l("OMQu"));l.d(t,"a",function(){return r});var r=function(){function n(n,t){this.elementRef=n,this._cognitiveApiService=t,this.localMediaStream=null,this.videoRecordingStarted=!1,this.videoRecorded=!1,this.analysisInProgress=!1,this.analysisCompleted=!1}return n.prototype.ngOnInit=function(){},n.prototype.startStreaming=function(){var n=this.elementRef.nativeElement.children.item(1),t=this;navigator.getUserMedia?navigator.getUserMedia({audio:!0,video:!0},function(l){n.src=window.URL.createObjectURL(l),t.localMediaStream=l},function(){}):n.src="somevideo.webm"},n.prototype.snapshot=function(){if(this.localMediaStream){var n=this.elementRef.nativeElement.children.item(1),t=this.elementRef.nativeElement.children.item(3),l=this.elementRef.nativeElement.children.item(2);t.getContext("2d").drawImage(n,0,0),l.src=t.toDataURL("image/webp")}},n.prototype.startVideoCapture=function(){var n={video:{mandatory:{minWidth:1280,minHeight:720}},audio:!0};navigator.mediaDevices.getUserMedia(n).then(this.startRecording.bind(this),function(){})},n.prototype.startRecording=function(n){this.videoRecordingStarted=!0,this.videoRecorded=!1;var t=this.elementRef.nativeElement.children.item(1).children.item(0),l={mimeType:"video/mp4"};this.recorder=u(n,l),t.src=window.URL.createObjectURL(n),this.localMediaStream=n,this.recorder.startRecording()},n.prototype.stopRecording=function(){this.videoRecordingStarted=!1,this.videoRecorded=!0,this.recorder.stopRecording(this.processVideo.bind(this));var n=this.localMediaStream;n.getAudioTracks().forEach(function(n){return n.stop()}),n.getVideoTracks().forEach(function(n){return n.stop()})},n.prototype.analyzeVideo=function(){var n=this;if(null==this.recorder.getBlob())return void alert("Record video for analysis");this.analysisInProgress=!0,this.analysisCompleted=!1,this.analysisStatus=["Uploading video for analysis..."],this._cognitiveApiService.postVideoForAnalysis(this.recorder.getBlob()).subscribe(function(t){n.analysisStatus.push("Uploading video completed...."),n.getResult(t)})},n.prototype.getResult=function(n){var t=this;setTimeout(function(){t.analysisStatus.push("Fetching analysis results...."),t._cognitiveApiService.getVideoAnalysis(n).subscribe(function(l){l.completed?(t.analysisInProgress=!1,t.analysisCompleted=!0,t.analysisResult=l.data):(t.analysisStatus.push("Video analysis not completed...."),t.getResult(n))})},1e4)},n.prototype.processVideo=function(n){this.elementRef.nativeElement.children.item(1).children.item(0).src=n},n.ctorParameters=function(){return[{type:e.P},{type:s.a}]},n}()},f4wg:function(n,t,l){"use strict";function e(n){return a._23(0,[(n()(),a._24(0,null,null,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["\n\t\t\t","\n\t\t"]))],null,function(n,t){n(t,1,0,t.context.$implicit)})}function u(n){return a._23(0,[(n()(),a._24(0,null,null,4,"div",[["class","analysis-status"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t\tAnalysis in progress... Please Wait...\n\t\t"])),(n()(),a._28(16777216,null,null,1,null,e)),a._25(802816,null,0,c.n,[a.W,a._8,a.l],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n\t"]))],function(n,t){n(t,3,0,t.component.analysisStatus)},null)}function i(n){return a._23(0,[(n()(),a._24(0,null,null,20,"div",[["class","analysis-results"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t\t"])),(n()(),a._24(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._27(null,["Analysis Results "])),(n()(),a._27(null,[" \n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Anger \t\t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Contempt \t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Disgust \t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Fear \t\t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Happiness \t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Neutral \t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Sadness \t: ","%\n\t\t"])),(n()(),a._24(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["Surprise \t: ","%\n\t"]))],null,function(n,t){var l=t.component;n(t,6,0,l.analysisResult.anger),n(t,8,0,l.analysisResult.contempt),n(t,10,0,l.analysisResult.disgust),n(t,12,0,l.analysisResult.fear),n(t,14,0,l.analysisResult.happiness),n(t,16,0,l.analysisResult.neutral),n(t,18,0,l.analysisResult.sadness),n(t,20,0,l.analysisResult.surprise)})}function s(n){return a._23(0,[(n()(),a._27(null,["\n"])),(n()(),a._24(0,null,null,22,"div",[["class","col-xs-12"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t"])),(n()(),a._24(0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),a._27(null,["Expression Analysis"])),(n()(),a._27(null,["\n\t"])),(n()(),a._24(0,null,null,10,"div",[["class","col-xs-12"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t\t"])),(n()(),a._24(0,null,null,1,"button",[["class","btn btn-primary col-xs-4"],["type","button"]],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.startVideoCapture()&&e}return e},null,null)),(n()(),a._27(null,["Start Capture"])),(n()(),a._27(null,[" \n\t\t"])),(n()(),a._24(0,null,null,1,"button",[["class","btn btn-primary col-xs-4"],["type","button"]],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.stopRecording()&&e}return e},null,null)),(n()(),a._27(null,["Stop Capture"])),(n()(),a._27(null,[" \n\t\t"])),(n()(),a._24(0,null,null,1,"button",[["class","btn btn-primary col-xs-3"],["type","button"]],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.analyzeVideo()&&e}return e},null,null)),(n()(),a._27(null,["Analyze"])),(n()(),a._27(null,[" \n\t"])),(n()(),a._27(null,["\n\t"])),(n()(),a._28(16777216,null,null,1,null,u)),a._25(16384,null,0,c.o,[a.W,a._8],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\t"])),(n()(),a._28(16777216,null,null,1,null,i)),a._25(16384,null,0,c.o,[a.W,a._8],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n"])),(n()(),a._24(0,null,null,4,"div",[["class","col-xs-12 video-content"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t"])),(n()(),a._24(0,null,null,1,"video",[["autoplay",""],["controls",""],["height","auto"],["width","100%"]],null,null,null,null,null)),(n()(),a._27(null,["\n\t  \n\t"])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n"]))],function(n,t){var l=t.component;n(t,19,0,l.analysisInProgress),n(t,22,0,l.analysisCompleted&&l.analysisResult)},null)}function r(n){return a._23(0,[(n()(),a._24(0,null,null,1,"app-main",[],null,null,null,s,h)),a._25(114688,null,0,d.a,[a.P,p.a],null,null)],function(n,t){n(t,1,0)},null)}var o=l("B4HZ"),a=l("/oeL"),c=l("qbdv"),d=l("diW6"),p=l("OMQu");l.d(t,"a",function(){return g});var f=[o.a],h=a._22({encapsulation:0,styles:f,data:{}}),g=a._26("app-main",d.a,r,{},{},[])},k7ea:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=[""]},p5Ee:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e={production:!0}},q4dy:function(n,t,l){"use strict";function e(n){return s._23(0,[(n()(),s._24(16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),s._25(212992,null,0,r.y,[r.q,s.W,s.e,[8,null],s.T],null,null)],function(n,t){n(t,1,0)},null)}function u(n){return s._23(0,[(n()(),s._24(0,null,null,1,"app-root",[],null,null,null,e,c)),s._25(49152,null,0,o.a,[],null,null)],null,null)}var i=l("k7ea"),s=l("/oeL"),r=l("BkNc"),o=l("wQAS");l.d(t,"a",function(){return d});var a=[i.a],c=s._22({encapsulation:0,styles:a,data:{}}),d=s._26("app-root",o.a,u,{},{},[])},qtrl:function(n,t){function l(n){throw new Error("Cannot find module '"+n+"'.")}l.keys=function(){return[]},l.resolve=l,n.exports=l,l.id="qtrl"},wQAS:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){this.title="app"}return n}()}},[1]);